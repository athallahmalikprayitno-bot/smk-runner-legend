<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMK RUNNER LEGEND</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: linear-gradient(135deg, #70e1f5, #ffd194);
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Poppins', sans-serif;
  overflow: hidden;
}
canvas {
  background-image: url('assets/image/BG.png');
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  border: 3px solid #000;
  display: none;
}

/* Loading Screen */
#loadingScreen {
  position: fixed;
  inset: 0;
  background: black;
  color: white;
  font-size: 30px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 9999;
}

/* Main Menu */
#mainMenu {
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, #2c3e50, #3498db);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  text-align: center;
  z-index: 1000;
}
#gameLogo {
  width: 200px;
  height: auto;
  border-radius: 15px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  margin-bottom: 25px;
  animation: floatLogo 3s ease-in-out infinite;
}
@keyframes floatLogo {
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0); }
}
#mainMenu h1 {
  font-size: 60px;
  margin-bottom: 40px;
  animation: glow 2s ease-in-out infinite alternate;
  letter-spacing: 2px;
}
@keyframes glow {
  from { text-shadow: 0 0 10px #fff, 0 0 20px #0ff; }
  to { text-shadow: 0 0 25px #ff0, 0 0 50px #f0f; }
}
.menu-button {
  padding: 15px 50px;
  margin: 10px;
  font-size: 22px;
  color: #fff;
  background: linear-gradient(45deg, #16a085, #27ae60);
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}
.menu-button:hover {
  transform: scale(1.1);
  background: linear-gradient(45deg, #1abc9c, #2ecc71);
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
}
#highScore {
  font-size: 20px;
  margin-top: 25px;
  color: #f1f1f1;
}

/* Option Screen */
#optionScreen {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  color: white;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: left;
  padding: 20px;
  z-index: 2000;
}
#optionScreen h2 {
  font-size: 36px;
  margin-bottom: 20px;
  color: #00ffff;
  text-shadow: 0 0 10px #00ffff;
}
.option-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: rgba(255,255,255,0.05);
  border: 2px solid #00ffff;
  border-radius: 15px;
  padding: 15px 25px;
  margin: 10px;
  width: 250px;
  text-align: center;
  transition: all 0.3s;
}
.option-item:hover {
  background: rgba(255,255,255,0.15);
  transform: scale(1.05);
}
.option-item label {
  font-size: 20px;
  color: white;
  margin-bottom: 8px;
}
.option-item select {
  font-size: 18px;
  padding: 8px 12px;
  color: white;
  background-color: black;
  border: 2px solid #00ffff;
  border-radius: 10px;
  cursor: pointer;
  outline: none;
}
#optionScreen button {
  margin-top: 40px;
  padding: 10px 30px;
  background: #27ae60;
  border: none;
  border-radius: 30px;
  color: white;
  cursor: pointer;
  font-size: 20px;
}

/* Overlay */
#overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  display: flex; justify-content: center; align-items: center;
  flex-direction: column;
  font-family: Arial, sans-serif;
  font-size: 40px; color: red;
  text-shadow: 2px 2px 4px #000;
  z-index: 3000;
  display: none;
}
#overlay p {
  font-size: 20px;
  color: white;
  margin-top: 10px;
}
#overlay button {
  margin-top: 20px;
  padding: 10px 25px;
  background: #27ae60;
  border: none;
  border-radius: 30px;
  color: white;
  font-size: 20px;
  cursor: pointer;
}
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="400"></canvas>

<div id="loadingScreen"><h2>Loading...</h2></div>

<div id="mainMenu">
  <img id="gameLogo" src="assets/image/Logo.jpg" alt="Game Logo">
  <h1>SMK RUNNER LEGEND</h1>
  <button class="menu-button" id="playBtn">Mulai Main</button>
  <button class="menu-button" id="optionBtn">Pengaturan</button>
  <div id="highScore"></div>
</div>

<div id="optionScreen">
  <h2>Pengaturan ‚öôÔ∏è</h2>
  <div class="option-item">
    <label>üéµ Suara:</label>
    <select id="soundOption">
      <option value="on">On</option>
      <option value="off">Off</option>
    </select>
  </div>
  <div class="option-item">
    <label>üî• Kesulitan:</label>
    <select id="difficulty">
      <option value="easy">Easy</option>
      <option value="normal" selected>Normal</option>
      <option value="hard">Hard</option>
      <option value="veryhard">Very Hard</option>
    </select>
  </div>
  <div class="option-item">
    <label>üé∂ Pilih Lagu BGM:</label>
    <select id="bgmSelect">
      <option value="assets/audio/Gone gone gone.mp3">Gone gone gone</option>
      <option value="assets/audio/Take me home.mp3">Take me home</option>
      <option value="assets/audio/Night Changes.mp3">Night Changes</option>
      <option value="assets/audio/Best friend.mp3">Best friend</option>
      <option value="assets/audio/everything u are.mp3">everything u are</option>
      <option value="assets/audio/Backburner.mp3">Backburner</option>
      <option value="assets/audio/Someone To You.mp3">Someone To You</option>
      <option value="assets/audio/Lampu kuning.mp3">lampu kuning</option>
      <option value="assets/audio/tresno tekan mati.mp3">tresno tekan mati</option>
      <option value="assets/audio/Bapak Mulyono Raja Tipu Tipu.mp3">Bapak Mulyono Raja Tipu Tipu</option>
    </select>
  </div>
  <button id="backBtn">Kembali</button>
</div>

<div id="overlay">
  <h1>GAME OVER</h1>
  <p>Ketuk layar untuk mulai lagi<br>atau tekan tombol di bawah untuk kembali ke menu</p>
  <button id="restartBtn">Mulai Lagi</button>
  <button id="backToMenuBtn">Kembali ke Menu</button>
</div>

<!-- üé¨ CUTSCENE JAM 06:30 -->
<script>
let cutsceneActive = false;

const cutsceneDiv = document.createElement("div");
cutsceneDiv.id = "cutscene";
cutsceneDiv.style.cssText = `
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg,#2c3e50,#34495e);
  color: white;
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  font-family: 'Poppins', sans-serif;
  font-size: 26px;
  text-align: center;
  z-index: 4000;
  transition: opacity 0.8s ease;
  opacity: 0;
`;
document.body.appendChild(cutsceneDiv);

const clockImg = document.createElement("img");
clockImg.src = "assets/image/alarm_clock.png"; // jam 06:30
clockImg.style.width = "220px";
clockImg.style.marginBottom = "30px";
cutsceneDiv.appendChild(clockImg);

const dialogue = document.createElement("div");
cutsceneDiv.appendChild(dialogue);

const alarmSound = new Audio("assets/audio/alarm.mp3");

function startCutscene(){
  cutsceneActive = true;
  mainMenu.style.display = "none";
  cutsceneDiv.style.display = "flex";
  setTimeout(()=>cutsceneDiv.style.opacity="1",100);
  playCutscene(0);
}

const cutsceneLines = [
  { text: "*Kringgggg...*", effect: "shake", delay: 2000 },
  { text: "Aduhhh gw telat nih!!", effect: "fade", delay: 1500 },
  { text: "Yaudah gw lari aja!!", effect: "fade", delay: 1200, end: true }
];

function playCutscene(index){
  if(index >= cutsceneLines.length){
    cutsceneDiv.style.opacity="0";
    setTimeout(()=>{
      cutsceneDiv.style.display="none";
      cutsceneActive = false;
      startGame();
    },800);
    return;
  }

  const line = cutsceneLines[index];
  dialogue.innerText="";
  fadeText(line.text);

  if(line.effect==="shake"){
    alarmSound.play().catch(()=>{});
    clockImg.style.animation="shake 0.3s ease-in-out 6";
    setTimeout(()=>clockImg.style.animation="none",1800);
  }

  setTimeout(()=>playCutscene(index+1),line.delay||2000);
}

function fadeText(text){
  dialogue.style.opacity="0";
  setTimeout(()=>{
    dialogue.innerText=text;
    dialogue.style.transition="opacity 0.8s ease";
    dialogue.style.opacity="1";
  },200);
}

const style = document.createElement("style");
style.textContent = `
@keyframes shake {
  0%{transform:translate(0,0);}
  25%{transform:translate(5px,0);}
  50%{transform:translate(-5px,0);}
  75%{transform:translate(5px,0);}
  100%{transform:translate(0,0);}
}`;
document.head.appendChild(style);
</script>

<script>
/* üéÆ KODE GAME UTAMA (aslinya tetap utuh) */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const mainMenu = document.getElementById("mainMenu");
const loadingScreen = document.getElementById("loadingScreen");
const optionScreen = document.getElementById("optionScreen");
const overlay = document.getElementById("overlay");
const highScoreDisplay = document.getElementById("highScore");
const difficultySelect = document.getElementById("difficulty");
const soundOption = document.getElementById("soundOption");
const bgmSelect = document.getElementById("bgmSelect");

let highScore = localStorage.getItem("highScore") || 0;
highScoreDisplay.innerText = "High Score: " + highScore;

let bgm = new Audio();
let jumpSound = new Audio("assets/audio/jump .mp3");
let gameOverSound = new Audio("assets/audio/game over.mp3");
bgm.loop = true; bgm.volume = 0.5;
jumpSound.volume = 0.2;
gameOverSound.volume = 0.6;

function playBGM(){ if(!isSoundOn()) return; bgm.src = bgmSelect.value; bgm.play().catch(()=>{}); }
function stopBGM(){ bgm.pause(); bgm.currentTime = 0; }
function isSoundOn(){ return soundOption.value==="on"; }

setTimeout(()=>{ loadingScreen.style.display="none"; mainMenu.style.display="flex"; },3000);

document.getElementById("optionBtn").onclick=()=>{ mainMenu.style.display="none"; optionScreen.style.display="flex"; };
document.getElementById("backBtn").onclick=()=>{ optionScreen.style.display="none"; mainMenu.style.display="flex"; };
document.getElementById("playBtn").onclick=()=>{ if(!cutsceneActive) startCutscene(); };

bgmSelect.addEventListener("change",()=>{ if(!gameOver && isSoundOn()){ stopBGM(); playBGM(); } });

/* ...lanjutan kode game lo tetap sama kayak versi terakhir */
</script>
</body>
</html>
